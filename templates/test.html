{% extends "layout.html" %}
{% block body %}
<script type="text/javascript">
    // document.addEventListener('DOMContentLoaded', ()=> {
    //     //document.querySelector('#Emp-Select').style.display = 'none'
    //     document.querySelectorAll('.kit-table-data').forEach(function(button) {
    //         button.onclick = ()=> {
    //             var form = document.forms[0]
    //             form.querySelector('input[name="hidden-kitchen-id"]').value = button.dataset.kitchen_col
    //             form.querySelector('input[name="hidden-kitchen-col"]').value = button.dataset.kitchen_col

    //         }
    //     })
    // })

    function togglePopup(kitchen_id, kitchen_col) {
        document.getElementById("popup-1").classList.toggle("active");
        var form = document.forms[0]
        form.querySelector('input[name="hidden-kitchen-id"]').value = kitchen_id
        form.querySelector('input[name="hidden-kitchen-col"]').value = kitchen_col
    }
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type=text/javascript>
    $(function () {
        $('a#process_input').bind('click', function () {
            $.getJSON('/_schedule_gen', {
                emp_id: $('select[name="emp_id"]').val(),
                kitchen_id: $('input[name="hidden-kitchen-id"]').val(),
                col: $('input[name="hidden-kitchen-col"]').val(),
                old_emp_id: $('input[name="hidden-old-emp-id"]').val(),
            }, function (data) {
                $("#result").text(data.result);
                //location.reload();
            });
            return false;
        });
    });
</script>

<link rel="stylesheet" href={{ url_for('static', filename='popup.css') }}>

<div class="popup" id="popup-1">
    <div class="overlay"></div>
    <div class="content">
        <div class="close-btn" onclick="togglePopup()">&times;</div>
        <br>
        <form action="{{url_for('test')}}" method="POST" id="">
            Employee:
            <select name="emp_id">
                {% for e in emp %}
                <option value={{ e.uniq_id }} {% if e.emp_id==emp_id%} selected="selected" {%endif%}>
                    {{ e.first_name+' '+e.last_name }}</option>
                {%endfor%}
            </select>
            <br>
            <input type="text" value=118 name="hidden-kitchen-id">
            <br>
            <input type="text" value="mon1" name="hidden-kitchen-col">
            <br>
            <input type="text" value="Test Test3" name="hidden-old-emp-id">
            <br>
            <div id="result"></div><br>
            <a href="#" id="process_input"><input type="submit" name="" id="" class="btn btn-primary btn-sm"></a>
        </form>

    </div>
</div>

<button onclick="togglePopup('105', 'fri1')" class="btn btn-outline-primary btn-sm kit-table-data" data-kitchen_id="105"
    data-kitchen_col="fri1">Show This</button>

{% endblock %}